<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="base-url" content="http://192.168.1.108/course">
        <title>Bootstrap 5 Dashboard</title>
        <!-- Bootstrap 5 CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet" />
        <link rel="stylesheet" type="text/css"
            href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
        <link href="css/style.css" rel="stylesheet" />
        <style>
            .loader {
                width: 48px;
                height: 48px;
                border: 5px solid #000000;
                color: #000000;
                border-bottom-color: transparent;
                border-radius: 50%;
                display: inline-block;
                box-sizing: border-box;
                animation: rotation 1s linear infinite;
                }
                .d-none{
                    display: none;
                }
                            
                @keyframes rotation {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
                } 
        
        </style>
    </head>
    <body>
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top"
            id="topbar"></nav>

        <!-- Sidebar -->
        <div id="sidebar" class="d-flex flex-column p-3"></div>
        
      
        <!-- Main Content -->
        <div id="content">


             <!--Loaders -->
            <div class="d-flex justify-content-center ">
              <div id="dashboard_loader" class="loader d-none">

            </div>

        </div>
            <div class="container-fluid">
                <h1 class="mb-4 " data-lang="lbl_welcome">
                    Overview</h1>
                <div class="row g-4">
                    <div class="d-flex justify-content-center">
                    <div class="spinner-border mb-2 d-none"
                        id="teacher_loaders"></div>
                    </div>
                    <!-- Card 1 -->
                    <div class="col-md-3">
                        <div class="card text-white bg-primary h-100">
                            <div class="card-body">
                                <h5 class="card-title"
                                    data-lang="lbl_number_teacher">number</h5>
                                <p class="card-text display-4" id="teacherCount"></p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 2 -->
                    <div class="col-md-3">
                        <div class="card text-white bg-success h-100">
                            <div class="card-body">
                                <h5 class="card-title"
                                    data-lang="lbl_number_Student"></h5>
                                <p class="card-text display-4"  id="studentCount"></p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 3 -->
                    <div class="col-md-3">
                        <div class="card text-white bg-warning h-100">
                            <div class="card-body">
                                <h5 class="card-title"  data-lang="lbl_number_course"></h5>
                                <p class="card-text display-4"  id="courseCount"></p>
                            </div>
                        </div>
                    </div>
                    <span
                        class="spinner-border spinner-border-sm d-none"
                        id="add_spinner"></span>

                     <!-- Card 4 -->
                    <div class="col-md-3">
                        <div class="card text-white bg-warning h-100">
                            <div class="card-body">
                                <h5 class="card-title"  data-lang="lbl_number_class"></h5>
                                <p class="card-text display-4"  id="classCount"></p>
                            </div>
                        </div>
                    </div>
                    <span
                        class="spinner-border spinner-border-sm d-none"
                        id="add_spinner"></span>    
                </div>
                <!-- Additional sections can go here -->
            </div>
        </div>

        <!-- Bootstrap 5 JS (optional, for interactivity) -->
        <script src="js/bootstrap.bundle.min.js"></script>
        <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
        <script src="js/js.js"></script>
        <script>
            if(!checkIfUserIsLoggedIn()){
                window.location.assign(BASE_URL + "/login.html");
            }

            
            window.addEventListener("DOMContentLoaded", function () {
                updateDashboardTable();
            });


            function updateDashboardTable() {
                  const dashboard_loader=document.getElementById("dashboard_loader");
                  dashboard_loader.classList.remove("d-none");
                   

                    fetch('' + API_URL + '/dashboard.php', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    })
                        .then(response => response.json()) // Parse the JSON response
                        .then(data => {
                            document.getElementById("teacherCount").innerText=data.teachers
                            document.getElementById("studentCount").innerText=data.students
                            document.getElementById("courseCount").innerText=data.courses
                            document.getElementById("classCount").innerText=data.classes
                            console.log(data.teachers)
                            dashboard_loader.classList.add("d-none");
                        })
                        .catch((error) => {
                            console.error('Error:', error);
                            dashboard_loader.classList.add("d-none");
                        });
                    
            }

        </script>

    </body>

</html>

